<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Report 003235 contents // GHW - Patrons at a specific library with a specific attribute &mdash; Next Steps 1.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/override.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Next Steps
            <img src="../_static/next.steps.logo.dark.1.1.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../foundations.html">Foundations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../basic.html">Koha basics for library staff</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about_us.html">About us</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usergroup/index.html">Usergroup meetings</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Highlighted training:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pages/tools/calendar/index.html">Set your calendar for the new year</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Upgrades:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../upgrades/21.11/master.html">21.11 Upgrade</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrades/22_05/22_05_master.html">22.05 Upgrade</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Bugs:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../bugs/index.html">Bugs</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reports:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reports_training/index.html">Reports training index</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Special documents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Next Steps</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Report 003235 contents // GHW - Patrons at a specific library with a specific attribute</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/reports/report_003235.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="report-003235-contents-ghw-patrons-at-a-specific-library-with-a-specific-attribute">
<h1>Report 003235 contents // GHW - Patrons at a specific library with a specific attribute<a class="headerlink" href="#report-003235-contents-ghw-patrons-at-a-specific-library-with-a-specific-attribute" title="Permalink to this heading"></a></h1>
<div class="section" id="report-technical-information-3235">
<h2>Report technical information: 3235<a class="headerlink" href="#report-technical-information-3235" title="Permalink to this heading"></a></h2>
<p>ID number: 3235</p>
<p>Name: GHW - Patrons at a specific library with a specific attribute</p>
<p>Group: Borrowers</p>
<p>Sub-group: Patron attributes</p>
<p>Created on: 2019-07-24 14:19:18</p>
<p>Modified on: 2019-07-25 10:43:22</p>
<p>Cache expiry in seconds: 300</p>
<p>Created by: gwilliams</p>
<p>This file generated: 2023-03-24 16:49:10</p>
<p>Notes:</p>
<div style="border: 1px solid black; padding: 25px;">

  <div id=reportinfo>
  <p>Lists all patrons at your library with the extended attribute category and attribute you specify</p>
  <ul><li>Lists current patrons with the attribute information you specify</li>
  <li>at the library you specify</li>
  <li>grouped and sorted by patron home library, patron attribute category, and patron attribute</li>
  <li>links to the patron's account</li>
  </ul><br />
  <p><ins>Notes:</ins></p>
  <p></p>
  <p>Designed to work in conjunction with report 3234.</p>
  <p></p>
  <p>Patrons can have multiple extended attributes on their accounts.  Similarly, patrons may not have any extended attributes on their accounts.  If this report is configured to report on multiple attributes at one time, it is possible that some patrons will show up on this list multiple times.</p>
  <p></p>
  <p>For more detailed information than this report provides use the following reports:</p>
  <ul>
  <li>3086 - GHW - Patron attributes - Newsletter permissions </li>
  <li>3087 - GHW - Patron attributes - Movie permissions </li>
  <li>3088 - GHW - Patron attributes - Internet permissions</li>
  <li>3089 - GHW - Patron attributes - Special locations </li>
  <li>3090 - GHW - Patron attributes - Holds contact</li>
  <li>3091 - GHW - Patron attributes - Account expired</li>
  <li>3092 - GHW - Patron attributes - Collection agency</li>
  <li>3093 - GHW - Patron attributes - Other attributes 1 / Other attributes 2 / Registration library</li>
  </ul>
  <p></p>
  <p><a href="/cgi-bin/koha/reports/guided_reports.pl?reports=3235&phase=Run%20this%20report"  target="_blank">Click here to run in a new window</a></p>
  </div>

</div></div>
<hr class="docutils" />
<div class="section" id="sql-3235">
<h2>SQL: 3235<a class="headerlink" href="#sql-3235" title="Permalink to this heading"></a></h2>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="w">  </span><span class="k">SELECT</span><span class="w"></span>
<span class="linenos"> 2</span><span class="w">    </span><span class="n">Concat</span><span class="p">(</span><span class="s1">&#39;&lt;a href=&quot;/cgi-bin/koha/circ/circulation.pl?borrowernumber=&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">borrowers</span><span class="p">.</span><span class="n">borrowernumber</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&quot; target=&quot;_blank&quot;&gt;Go to patron account&lt;/a&gt;&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">LINK</span><span class="p">,</span><span class="w"></span>
<span class="linenos"> 3</span><span class="w">    </span><span class="n">borrowers</span><span class="p">.</span><span class="n">branchcode</span><span class="p">,</span><span class="w"></span>
<span class="linenos"> 4</span><span class="w">    </span><span class="n">borrowers</span><span class="p">.</span><span class="n">cardnumber</span><span class="p">,</span><span class="w"></span>
<span class="linenos"> 5</span><span class="w">    </span><span class="n">Concat_Ws</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">borrowers</span><span class="p">.</span><span class="n">surname</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39; / &#39;</span><span class="p">,</span><span class="w"> </span><span class="n">borrowers</span><span class="p">.</span><span class="n">firstname</span><span class="p">,</span><span class="w"> </span><span class="k">If</span><span class="p">(</span><span class="n">borrowers</span><span class="p">.</span><span class="n">othernames</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">Concat_Ws</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39; (&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">borrowers</span><span class="p">.</span><span class="n">othernames</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;)&#39;</span><span class="p">)))</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">NAME</span><span class="p">,</span><span class="w"></span>
<span class="linenos"> 6</span><span class="w">    </span><span class="n">categories</span><span class="p">.</span><span class="n">description</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">PATRON_CATEGORY</span><span class="p">,</span><span class="w"></span>
<span class="linenos"> 7</span><span class="w">    </span><span class="n">borrower_attribute_types</span><span class="p">.</span><span class="n">description</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">ATTRIBUTE_TYPE</span><span class="p">,</span><span class="w"></span>
<span class="linenos"> 8</span><span class="w">    </span><span class="k">If</span><span class="p">(</span><span class="n">authorised_values</span><span class="p">.</span><span class="n">lib</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">borrower_attributes</span><span class="p">.</span><span class="n">attribute</span><span class="p">,</span><span class="w"> </span><span class="n">authorised_values</span><span class="p">.</span><span class="n">lib</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">ATTRIBUTE_TEXT</span><span class="p">,</span><span class="w"></span>
<span class="linenos"> 9</span><span class="w">    </span><span class="n">borrower_attributes</span><span class="p">.</span><span class="n">attribute</span><span class="w"></span>
<span class="linenos">10</span><span class="w">  </span><span class="k">FROM</span><span class="w"></span>
<span class="linenos">11</span><span class="w">    </span><span class="n">borrower_attributes</span><span class="w"></span>
<span class="linenos">12</span><span class="w">    </span><span class="k">JOIN</span><span class="w"> </span><span class="n">borrowers</span><span class="w"></span>
<span class="linenos">13</span><span class="w">      </span><span class="k">ON</span><span class="w"> </span><span class="n">borrower_attributes</span><span class="p">.</span><span class="n">borrowernumber</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">borrowers</span><span class="p">.</span><span class="n">borrowernumber</span><span class="w"></span>
<span class="linenos">14</span><span class="w">    </span><span class="k">JOIN</span><span class="w"> </span><span class="n">borrower_attribute_types</span><span class="w"></span>
<span class="linenos">15</span><span class="w">      </span><span class="k">ON</span><span class="w"> </span><span class="n">borrower_attributes</span><span class="p">.</span><span class="n">code</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">borrower_attribute_types</span><span class="p">.</span><span class="n">code</span><span class="w"></span>
<span class="linenos">16</span><span class="w">    </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">authorised_values</span><span class="w"></span>
<span class="linenos">17</span><span class="w">      </span><span class="k">ON</span><span class="w"> </span><span class="n">authorised_values</span><span class="p">.</span><span class="n">category</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">borrower_attribute_types</span><span class="p">.</span><span class="n">authorised_value_category</span><span class="w"> </span><span class="k">AND</span><span class="w"></span>
<span class="linenos">18</span><span class="w">        </span><span class="n">authorised_values</span><span class="p">.</span><span class="n">authorised_value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">borrower_attributes</span><span class="p">.</span><span class="n">attribute</span><span class="w"></span>
<span class="linenos">19</span><span class="w">    </span><span class="k">JOIN</span><span class="w"> </span><span class="n">categories</span><span class="w"></span>
<span class="linenos">20</span><span class="w">      </span><span class="k">ON</span><span class="w"> </span><span class="n">borrowers</span><span class="p">.</span><span class="n">categorycode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">categories</span><span class="p">.</span><span class="n">categorycode</span><span class="w"></span>
<span class="linenos">21</span><span class="w">  </span><span class="k">WHERE</span><span class="w"></span>
<span class="linenos">22</span><span class="w">    </span><span class="n">borrowers</span><span class="p">.</span><span class="n">branchcode</span><span class="w"> </span><span class="k">LIKE</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="n">Choose</span><span class="w"> </span><span class="n">your</span><span class="w"> </span><span class="n">library</span><span class="o">|</span><span class="n">LBRANCH</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="k">AND</span><span class="w"></span>
<span class="linenos">23</span><span class="w">    </span><span class="n">borrower_attributes</span><span class="p">.</span><span class="n">code</span><span class="w"> </span><span class="k">LIKE</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="n">Choose</span><span class="w"> </span><span class="n">attribute</span><span class="w"> </span><span class="k">type</span><span class="o">|</span><span class="n">Q_BORROWER_ATTRIBUTES_A</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="k">AND</span><span class="w"></span>
<span class="linenos">24</span><span class="w">    </span><span class="n">borrower_attributes</span><span class="p">.</span><span class="n">attribute</span><span class="w"> </span><span class="k">LIKE</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="n">Enter</span><span class="w"> </span><span class="n">attribute</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">symbol</span><span class="o">&gt;&gt;</span><span class="w"></span>
<span class="linenos">25</span><span class="w">  </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"></span>
<span class="linenos">26</span><span class="w">    </span><span class="n">borrowers</span><span class="p">.</span><span class="n">branchcode</span><span class="p">,</span><span class="w"></span>
<span class="linenos">27</span><span class="w">    </span><span class="n">NAME</span><span class="p">,</span><span class="w"></span>
<span class="linenos">28</span><span class="w">    </span><span class="n">borrowers</span><span class="p">.</span><span class="n">cardnumber</span><span class="w"></span>
</pre></div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Northeast Kansas Library System.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
    <p><br /><a rel="license" href="http://creativecommons.org/licenses/by/4.0/" target="_blank"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a><br /><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/" target="_blank">Creative Commons Attribution 4.0 International License</a>.</p>
    <p>Next Search Catalog contact info:<br />NEKLS: 785-838-4090<br />(toll free: 888-296-6963)<br />After hours: 785-813-1356</p>
     <img src="https://raw.githubusercontent.com/northeast-kansas-library-system/nextimages/master/nexthelp.svg" alt="Nexthelp email address" />
     


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>